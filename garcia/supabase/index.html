<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Votação: 1 vs 2</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Asap:wght@400;600;700&display=swap" rel="stylesheet" />
        <style>
            :root {
                --bg: #0f172a; /* slate-900 */
                --panel: #111827; /* gray-900 */
                --text: #e5e7eb; /* gray-200 */
                --muted: #94a3b8; /* slate-400 */
                --primary: #22c55e; /* green-500 */
                --secondary: #3b82f6; /* blue-500 */
                --border: #1f2937; /* gray-800 */
                --accent: #f59e0b; /* amber-500 */
            }
            * { box-sizing: border-box; }
            html, body {
                margin: 0;
                padding: 0;
                font-family: "Asap", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
                background: linear-gradient(120deg, #0b1020, #0f172a 40%, #0b1020);
                color: var(--text);
                min-height: 100vh;
            }
            .wrap {
                max-width: 880px;
                margin: 0 auto;
                padding: 24px 16px 64px;
            }
            header {
                text-align: center;
                margin: 16px 0 28px;
            }
            header h1 {
                margin: 0 0 8px;
                font-size: 28px;
                letter-spacing: 0.2px;
            }
            header p { margin: 0; color: var(--muted); }
            .panel {
                background: radial-gradient(1200px 400px at 10% -10%, #1c2a41, transparent 40%),
                                        radial-gradient(1000px 600px at 110% -20%, #1b2436, transparent 40%),
                                        var(--panel);
                border: 1px solid var(--border);
                border-radius: 14px;
                padding: 18px;
                box-shadow: 0 8px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.02);
            }
            .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
            @media (min-width: 720px) {
                .grid { grid-template-columns: 1fr 1fr; }
            }
            .card {
                padding: 16px;
                border: 1px solid var(--border);
                border-radius: 12px;
                background: rgba(255,255,255,.02);
            }
            .counts { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
            .counts .cell { text-align: center; }
            .counts .big { font-size: 28px; font-weight: 700; }
            .bar {
                height: 14px;
                border-radius: 8px;
                background: #0b1222;
                border: 1px solid var(--border);
                overflow: hidden;
            }
            .bar > span {
                display: block;
                height: 100%;
                width: 0%;
                transition: width .35s ease;
            }
            .bar-1 > span { background: linear-gradient(90deg, #16a34a, #22c55e); }
            .bar-2 > span { background: linear-gradient(90deg, #2563eb, #3b82f6); }
            .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
            button.vote {
                cursor: pointer;
                border: 1px solid var(--border);
                padding: 14px 18px;
                border-radius: 12px;
                font-weight: 700;
                letter-spacing: .3px;
                color: #0b1222;
                transition: transform .05s ease, box-shadow .2s ease;
            }
            button.vote:active { transform: translateY(1px); }
            #vote-1 { background: linear-gradient(180deg, #22c55e, #16a34a); }
            #vote-2 { background: linear-gradient(180deg, #3b82f6, #2563eb); color: #f8fafc; }
            .note { color: var(--muted); font-size: 13px; margin-top: 8px; }
            .msg { margin-top: 12px; font-weight: 600; }
            .ok { color: #86efac; }
            .err { color: #fca5a5; }
            .header-links { text-align: center; margin-top: 8px; }
            .header-links a { color: #93c5fd; text-decoration: none; }
        </style>
    </head>
    <body>
        <div class="wrap">
            <header>
                <h1>Votação: 1 vs 2</h1>
                <p>Vote em um dos números e veja o placar em tempo real.</p>
                <div class="header-links"><a href="../../index.html">← Voltar ao site</a></div>
            </header>

            <div class="panel">
                <div class="grid">
                    <section class="card">
                        <h3 style="margin-top:0">Placar</h3>
                        <div class="counts" aria-live="polite">
                            <div class="cell">
                                <div>Votos no 1</div>
                                <div id="count-1" class="big">0</div>
                            </div>
                            <div class="cell">
                                <div>Total</div>
                                <div id="count-total" class="big">0</div>
                            </div>
                            <div class="cell">
                                <div>Votos no 2</div>
                                <div id="count-2" class="big">0</div>
                            </div>
                        </div>
                        <div style="margin-top:12px; display:grid; gap:10px">
                            <div>
                                <div style="display:flex; justify-content:space-between; font-size:13px; color:var(--muted)"><span>1</span><span id="pct-1">0%</span></div>
                                <div class="bar bar-1" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-label="Percentual do 1"><span id="bar-1"></span></div>
                            </div>
                            <div>
                                <div style="display:flex; justify-content:space-between; font-size:13px; color:var(--muted)"><span>2</span><span id="pct-2">0%</span></div>
                                <div class="bar bar-2" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-label="Percentual do 2"><span id="bar-2"></span></div>
                            </div>
                        </div>
                    </section>

                    <section class="card">
                        <h3 style="margin-top:0">Votar</h3>
                        <div class="actions">
                            <button id="vote-1" class="vote">Votar no 1</button>
                            <button id="vote-2" class="vote">Votar no 2</button>
                        </div>
                        <div class="note">Para evitar votos repetidos, guardamos um marcador no seu navegador (localStorage). Isso não é à prova de fraude, mas ajuda.</div>
                        <div id="msg" class="msg" role="status" aria-live="polite"></div>
                    </section>
                </div>
            </div>
        </div>

        <!-- Carrega a aplicação; vote.js importa o SDK do Supabase e ./config.js -->
        <script type="module" src="../../js/vote.js"></script>
    </body>
</html>